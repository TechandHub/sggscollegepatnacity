<%- include('./partials/header.ejs') %>

    <!-- Sidebar Start -->
    <%- include('./partials/admin-sidebar.ejs') %>
        <!-- Sidebar End -->


        <!-- Content Start -->
        <div class="content">
            <!-- Navbar Start -->
            <%- include('./partials/navbar.ejs') %>
            <!-- Navbar End -->

                <%# include("./partials/messageAlert.ejs") %>

                <!-- Notice Board Form Start -->
                <div class="col-sm-12 col-xl-12 pt-4 px-4 d-md-flex gap-4 justify-content-between">
                    <div class="bg-light rounded h-100 p-4 mb-2 flex-grow-1">
                        <h6 class="mb-4">Notice Board</h6>
                        <form action="/main/admin/notice-board" method="post" enctype="multipart/form-data">
                            <div class="row mb-3">
                                <label for="noticeTitle" class="col-sm-3 col-md-2 col-form-label">Title :</label>
                                <div class="col-sm-6 col-md-8">
                                    <input type="text" class="form-control" id="noticeTitle" name="noticeTitle"
                                        placeholder="Notice Title" required>
                                </div>
                            </div>
        
                            <div class="row mb-3">
                                <label for="noticeMedia" class="col-sm-3 col-md-2 col-form-label">Upload Notice PDF
                                    :</label>
                                <div class="col-sm-6 col-md-8">
                                    <input class="form-control form-control-sm" id="noticeMedia" name="noticeMedia"
                                        type="file" required>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Publish</button>
                        </form>
                    </div>

                </div>
                <!-- Notice Board Form End -->


                <!-- All Notices Start -->
                <div class="container-fluid pt-4 px-4">
                    <div class="row bg-light rounded justify-content-center m-0 p-2">
                        <section class="section">
                            <div class="row">
                                <!-- List starts Here     -->
                                <div class="col-12">
                                    <div class="bg-light rounded h-100 p-0">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <h6 class="my-3 ">All Published Notices (<%= locals.allNotices.length %>)</h6>
                                        </div>
                                        <div class="table-responsive">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th scope="col">S.No.</th>
                                                        <th scope="col">Title</th>
                                                        <th scope="col">Notice Preview</th>
                                                        <th scope="col">Edit</th>
                                                        <th scope="col">Delete</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% if (locals.allNotices) { %>
                                                        <% allNotices.reverse().forEach((element, index)=> { %>
                                                            <tr>
                                                                <th scope="row">
                                                                    <%= index + 1%>
                                                                </th>
                                                                <td>
                                                                    <%= element.noticeTitle%>
                                                                </td>
                                                                <td>
                                                                    <div style="height: 100px; width: 100px;">
                                                                        <%# if (element.noticePDF.split('.').pop().split(/\#|\?/)[0] === 'pdf') { %>
                                                                            <!-- <a href=<%# element.noticePDF%>>Download</a> -->
                                                                        <%# } else { %>
                                                                            <!-- <a href=<%# element.noticePDF%>> -->
                                                                                <!-- <img style="width: 100%; height: 100%; overflow: hidden; object-position: center; object-fit: contain;" src=<%# element.noticePDF%> alt="" download> -->
                                                                                 <!-- Download -->
                                                                            <!-- </a> -->
                                                                            
                                                                        <%# } %>
                                                                        <a href=<%= element.noticeMedia %>>Preview</a>
                                                                    </div>
                                                                </td>
                                                                <td>
                                                                    <a href="/main/admin/edit-notice/<%= element._id %>"
                                                                        class="px-4 btn btn-warning w-md">Edit</a>
                                                                </td>
                                                                <td>
                                                                    <a href="/main/admin/delete-notice/<%= element._id %>"
                                                                        class="deleteBtn btn btn-danger w-md">Delete</a>
                                                                </td>

                                                            </tr>
                                                            <% }); %>
                                                                <% } %>
                                                </tbody>
                                            </table>
                                            <% if (locals.allNotices) { %>
                                                <% if (locals.allNotices.length===0) { %>
                                                    <h3>Notice not published ...</h3>
                                                <% } %>
                                            <% } %>
                                        </div>
                                    </div>
                                </div>
                                <!-- List ends Here     -->
                            </div>
                        </section>
                    </div>
                </div>
                <!-- All Notices End -->


                <!-- Footer Start -->
                <%- include('./partials/main-footer.ejs') %>
                    <!-- Footer End -->
        </div>
        <!-- Content End -->


        <!-- Back to Top -->
        <a href="#" class="btn btn-lg btn-primary btn-lg-square back-to-top"><i class="bi bi-arrow-up"></i></a>
        </div>

        <%- include('./partials/jsLibraries.ejs') %>
            </body>

            </html>